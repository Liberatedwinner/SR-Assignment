# SearcHRight AI Technical Assignment

## ëª©í‘œ

> **_íšŒì‚¬, ì¬ì§ê¸°ê°„, ì§ë¬´(íƒ€ì´í‹€) ë§Œ ì¡´ì¬í•˜ëŠ” ì¸ì¬ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ LLM ì„ í™œìš©í•˜ì—¬ ì–´ë–¤ ê²½í—˜ì„ í–ˆëŠ”ì§€, ì–´ë–¤ ì—­ëŸ‰ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ ì¶”ë¡ í•˜ê¸°_**

1. ì¸ì¬ ë°ì´í„° example 3ê±´ ì œê³µí•©ë‹ˆë‹¤.
2. ê·¸ ì¸ì¬ ë°ì´í„°ë“¤ì˜ íšŒì‚¬ ë°ì´í„° (ë‰´ìŠ¤, ì¬ì§ì ìˆ˜ ë³€ë™, ìë³¸ê¸ˆ ë³€ë™, íˆ¬ì ë¼ìš´ë“œ ì •ë³´) ì œê³µí•©ë‹ˆë‹¤.
   - ë§Œì•½ ë” í•„ìš”í•˜ë‹¤ë©´, ì™¸ë¶€ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ í•©ì¹˜ëŠ” ê²ƒì€ ìƒê´€ ì—†ìŠµë‹ˆë‹¤.
   - ì›ë³¸ ë°ì´í„°ë¥¼ ë³€í˜•í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.
   - **í•˜ì§€ë§Œ ì¶”ê°€ ë˜ëŠ” ë³€ë™í•œ ë°ì´í„°ì— ëŒ€í•œ "ê°ê´€ì ì¸ ì‚¬ì‹¤" ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤. (ì¶œì²˜ ë“±)**
3. LLM ì¤‘ OpenAIì˜ token ì œê³µí•©ë‹ˆë‹¤.
   - í˜¹ì‹œ ëª¨ë¥¼ íƒˆì·¨, ì´ìŠˆ, ë³´ì•ˆ ë“±ì˜ ì´ìœ ë¡œ í† í° ì‚¬ìš© ë¹„ìš©ì€ $20ìœ¼ë¡œ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤.
   - ë§Œì•½ ë” í•„ìš”í•˜ë‹¤ë©´ ë¶€ë‹´ ì—†ì´ ì•„ë˜ì— ì•ˆë‚´ëœ ì´ë©”ì¼ ë˜ëŠ” ì•ˆë‚´ ë°›ì€ ìœ ì„  ë²ˆí˜¸ë¡œ ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤. 
4. ìœ„ 3ë²ˆ í† í°ìœ¼ë¡œ ì‚¬ìš©ì´ í—ˆìš©ëœ API (GPT RestAPI ê¸°ì¤€)ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
   - `/v1/models`
   - `/v1/audio`
   - `/v1/chat/completions`
   - `/v1/embeddings`
   - `/v1/images`
   - `/v1/moderations`

## ì„¸ë¶€ ì‚¬í•­

### 1) ê¸°ë³¸ input ê³¼ output flow

```mermaid
flowchart LR
    A[ì¸ì¬ë°ì´í„° - ***json***] --> B[API ìš”ì²­]
    B --> C[***LLM ê¸°ë°˜ ê²½í—˜ íŒë‹¨ ì‹œìŠ¤í…œ***]
    C --> D[ê²½í—˜ê°’ ì¶œë ¥]
    D --> J[ì´ˆê¸° ìŠ¤íƒ€íŠ¸ì—… ê²½í—˜<br />ë¹…í…Œí¬ ê²½í—˜<br />ê¸€ë¡œë²Œ ëŸ°ì¹­ ê²½í—˜<br />ê¸°ìˆ  ë¦¬ë”ì‹­ ê²½í—˜<br />B2C/B2B ë„ë©”ì¸ ê²½í—˜<br />ë¬¼ë¥˜ ë„ë©”ì¸ ê²½í—˜ ...]
```

#### *"LLM ê¸°ë°˜ ê²½í—˜ íŒë‹¨ ì‹œìŠ¤í…œ" ë‚´ë¶€ ë¡œì§*

```mermaid
flowchart LR
    A[ì¸ì¬ ë°ì´í„° ì „ì²˜ë¦¬] --> B

    subgraph ë²¡í„° ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤
    B[ë²¡í„° ê²€ìƒ‰ ì¿¼ë¦¬ ìƒì„±] --> C[ë²¡í„°DB ê²€ìƒ‰ ë° ë¬¸ì„œ ì¶”ì¶œ]
    end

    C --> D[LLM ì»¨í…ìŠ¤íŠ¸ êµ¬ì„±]
    D --> E[ê²½í—˜ íƒœê·¸ ì¶”ë¡ ]
    E --> F[ê²°ê³¼ í›„ì²˜ë¦¬]
```

### 1) ì‚¬ì „ ì„¸íŒ… ë° ì‚¬ìš©í•˜ê¸°

> ê°€ìƒí™˜ê²½ê³¼ docker compose ë¥¼ ì‹¤í–‰í•œ ìƒíƒœì—ì„œ ì•„ë˜ ì»¤ë©˜ë“œ, ì‚¬ì „ ì„¸íŒ…ì„ F/U í•´ì£¼ì…”ì•¼ ì •ìƒ ì‘ë™ í•©ë‹ˆë‹¤.

1. `example_datas` ê²½ë¡œë¡œ ì´ë™í•œ ìƒíƒœì—ì„œ ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì°¨ë¡€ë¡œ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.
2. `python ./setup_company_data.py`
3. `python ./setup_company_news_data.py`
4. `cd ..` í•˜ê³ , ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì°¨ë¡€ë¡œ ì‹¤í–‰í•´ì£¼ì„¸ìš”.
5. `python llm_internal_api.py` 

   `(port: 9000, POST: /llm/embedding, /llm/tagging)`
6. `python main.py` 

   `(port: 8000, POST: /api/db/search-talents, /api/db/upload-talents, /api/infer/extract-tags)`
7. ì¼ë¶€ ë¡œì§ì˜ í…ŒìŠ¤íŠ¸ëŠ” `pytest` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë³„ë„ë¡œ ì„¤ì¹˜í•œ ë‹¤ìŒ, `/tests` ì—ì„œ `pytest`ë¡œ ë‹¨ë²ˆì— ê°€ëŠ¥í•©ë‹ˆë‹¤.

### 2) êµ¬ì¡°ë„
```
ğŸ“¦ 
â”œâ”€Â llm_internal_api.py
â”œâ”€Â main.py
â”œâ”€Â nginx
â””â”€Â src
Â Â Â â”œâ”€Â __init__.py
Â Â Â â”œâ”€Â api_config.py
Â Â Â â”œâ”€Â api_utils.py
Â Â Â â”œâ”€Â database
Â Â Â â”‚Â Â â”œâ”€Â db_config.py
Â Â Â â”‚Â Â â”œâ”€Â db_lifespan.py
Â Â Â â”‚Â Â â”œâ”€Â db_utils.py
Â Â Â â”‚Â Â â”œâ”€Â sql_creates.py
Â Â Â â”‚Â Â â””â”€Â sql_inserts.py
Â Â Â â”œâ”€Â llm
Â Â Â â”‚Â Â â”œâ”€Â llm_config.py
Â Â Â â”‚Â Â â”œâ”€Â llm_inference.py
Â Â Â â”‚Â Â â”œâ”€Â llm_lifespan.py
Â Â Â â”‚Â Â â””â”€Â llm_utils.py
Â Â Â â”œâ”€Â routers
Â Â Â â”‚Â Â â”œâ”€Â llm_router.py
Â Â Â â”‚Â Â â”œâ”€Â tag_extraction.py
Â Â Â â”‚Â Â â”œâ”€Â talent_search.py
Â Â Â â”‚Â Â â””â”€Â talent_upload.py
Â Â Â â””â”€Â tests
Â Â Â Â Â Â â”œâ”€Â __init__.py
Â Â Â Â Â Â â”œâ”€Â _test_main.py
Â Â Â Â Â Â â”œâ”€Â mocking_internal_server.py
Â Â Â Â Â Â â”œâ”€Â search_logic.py
Â Â Â Â Â Â â”œâ”€Â test_get_embedding.py
Â Â Â Â Â Â â”œâ”€Â test_infer_tags.py
Â Â Â Â Â Â â””â”€Â test_map_positions.py
```
Â©generated by [Project Tree Generator](https://woochanleee.github.io/project-tree-generator)
- `/database`: DBë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì½”ë“œ
- `/llm`: LLMì˜ embedding ë° taggingì— í•„ìš”í•œ ì½”ë“œ
- `/routers`: ê´€ë¦¬ë¥¼ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ API ì‹¤í–‰ íŒŒì¼ì—ì„œ ë¶„ë¦¬í•œ ë¼ìš°í„°ë“¤
- `/tests`: ì¼ë¶€ ë¡œì§ì˜ ê²€ì¦ ë° API í†µì‹ ì„ ì ê²€í•˜ê¸° ìœ„í•œ ì½”ë“œ

### 3) êµ¬í˜„ QnA


